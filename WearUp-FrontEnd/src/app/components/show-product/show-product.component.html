<main class="position-relative">

  <div class="container-fluid position-relative ">
    <div class="row">

      <!-- COLONNA INFO -->
      <div class="col-md-4 d-none d-md-block py-3 overflow-auto colonna-info" style="height: calc(100vh - 303px);" #productInfo>

        <div class="product-info rounded-4 h-100 p-4 p-lg-5 d-flex flex-column">

          <div class="row justify-content-between align-items-center">
            <div class="col-6">
              <div class="bg-white p-2 rounded-4 d-inline-block">
                <img [src]="product?.brand?.profilePicture" style="height: 50px;" alt="">
              </div>
            </div>
            <div class="col-6">
              <p class="text-end">{{product?.brand?.brandName}}</p>
            </div>
          </div>

          <div class="mt-2 text-center flex-grow-1">
            <div class="row mt-2">
              <div class="col-4">
                <p class="fw-lighter m-0">#{{product?.productCode}}</p>
              </div>
              <div class="col-4">
                <p class="fw-lighter text-break">{{product?.type}}</p>
              </div>
              <div class="col-4 d-flex justify-content-center gap-3">
                <div class="">
                  <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">
                    <path d="M7.62236 1.00235C8.01413 0.329782 8.98582 0.329782 9.37751 1.00235L11.6483 4.9011L16.058 5.85599C16.8187 6.02071 17.119 6.9448 16.6004 7.52521L13.5941 10.8897L14.0486 15.3785C14.127 16.1529 13.341 16.724 12.6287 16.4102L8.49998 14.5908L4.37122 16.4102C3.65897 16.724 2.87289 16.1529 2.9513 15.3785L3.40579 10.8897L0.399596 7.52521C-0.119008 6.9448 0.18125 6.02071 0.941957 5.85599L5.35159 4.9011L7.62236 1.00235Z" fill="url(#paint0_linear_180_5)"/>
                    <defs>
                      <linearGradient id="paint0_linear_180_5" x1="17.0308" y1="-0.108886" x2="-0.0307258" y2="16.9526" gradientUnits="userSpaceOnUse">
                        <stop stop-color="#FFEC00"/>
                        <stop offset="1" stop-color="#F57F23"/>
                      </linearGradient>
                    </defs>
                  </svg>
                </div>
                <p class="fw-lighter m-0"> {{product?.likeCounter}}</p>
              </div>
            </div>
            <h2>{{product?.productName}}</h2>
            <hr class="border-3 ">
            <p class="fw-light fs-6">{{product?.description}}</p>
            <p class="text-white m-0 fst-italic fw-bold fs-1">{{product?.price}} €</p>
          </div>

          <div class="text-center fw-lighter fst-italic d-flex flex-column">
            <a class="text-white" href="">{{product?.brand?.webSite}}</a>
            <a class="text-white" href="mailto:">{{product?.brand?.email}}</a>
            <p>{{product?.brand?.phoneNumber}}</p>
            <p></p>
          </div>

        </div>
      </div>

      <!-- bottone di info a scomparsa -->
      <div class="d-md-none position-absolute z-1 text-end pt-3 pe-3">
        <button type="button" data-bs-toggle="modal" data-bs-target="#searchModal" class="border-0 rounded-circle" style="width: 50px; height: 50px; background-color: #282828;">
          <i class="bi bi-info text-white fs-2 d-flex p-2"></i>
        </button>
      </div>

      <!-- info modale -->
      <div class="modal fade mt-5" id="searchModal" tabindex="1">
        <div class="modal-dialog">
          <div class="modal-content rounded-5">
            <div class="modal-body rounded-4" style="background-color: #282828;">

              <div class="row justify-content-between align-items-center">
                <div class="col-6">
                  <div class="bg-white p-2 rounded-4 d-inline-block">
                    <img [src]="product?.brand?.profilePicture" style="height: 50px;" alt="">
                  </div>
                </div>
                <div class="col-6">
                  <p class="text-end">{{product?.brand?.brandName}}</p>
                </div>
              </div>

              <div class="mt-2 text-center flex-grow-1">
                <div class="row mt-2">
                  <div class="col-4">
                    <p class="fw-lighter m-0 text-white">#{{product?.productCode}}</p>
                  </div>
                  <div class="col-4">
                    <p class="fw-lighter text-white">{{product?.type}}</p>
                  </div>
                  <div class="col-4">
                    <p class="fw-lighter text-white">Likes: {{product?.likeCounter}}</p>
                  </div>
                </div>
                <h2 class="text-white">{{product?.productName}}</h2>
                <hr class="border-3 ">
                <p class="fw-light fs-6 text-white">{{product?.description}}</p>
                <p class="text-white m-0 fst-italic fw-bold fs-1 text-white">{{product?.price}} €</p>
              </div>

              <div class="text-center fw-lighter fst-italic d-flex flex-column">
                <a class="text-white" href="">{{product?.brand?.webSite}}</a>
                <a class="text-white" href="mailto:">{{product?.brand?.email}}</a>
                <p class="text-white">{{product?.brand?.phoneNumber}}</p>
                <p></p>
              </div>

            </div>
          </div>
        </div>
      </div>


      <!-- COLONNA 2 -->
      <div class="product-3d col-12 col-md-8 p-md-0" >
        <div class="container-fluid p-0 h-100 position-relative canvasContainer" #canvasContainerRef>

          <div class="linkBack mt-3 position-absolute">
            <a routerLink="/products" class="">
              <svg xmlns="http://www.w3.org/2000/svg" width="51" height="42" viewBox="0 0 51 42" fill="none">
                <path d="M22.0049 3.87787L0.956733 19.1242C0.311494 19.6041 -9.48448e-07 20.302 -9.17939e-07 21C-8.8743e-07 21.698 0.311494 22.3959 0.956733 22.8758L22.0049 38.1221C23.9851 39.5835 28.1903 42.768 29.5475 41.8301C30.8157 40.914 31.1717 39.0382 29.9035 38.1221L24.5636 34.2615L23.9628 33.8252C22.1606 32.4947 23.0951 29.6592 25.3646 29.6592L42.7415 29.6592C44.922 29.6592 46.969 28.6341 48.2149 26.8673C49.5944 24.9043 50.2174 22.8758 50.2174 21.0218L50.2174 20.9782C50.2174 19.1242 49.5944 17.0957 48.2149 15.1327C46.969 13.3659 44.922 12.3408 42.7415 12.3408L25.3646 12.3408C23.0951 12.3408 22.1606 9.50527 23.9628 8.17476L24.5636 7.73853L29.9035 3.87787C31.1717 2.96178 30.8157 1.08598 29.5475 0.169892C28.1903 -0.768009 23.9851 2.41649 22.0049 3.87787Z" fill="#282828"/>
              </svg>
            </a>
          </div>

          <div class="d-flex flex-column btn-group position-absolute bottom-0">
            <button class="d-block my-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="37" height="44" viewBox="0 0 37 44" fill="none">
                <path d="M12.9921 3.08488C12.5162 3.36526 12.3578 3.97828 12.6382 4.4541C12.9186 4.92992 13.5316 5.08836 14.0074 4.80798L12.9921 3.08488ZM18.5 1L19.0077 0.13845C18.6944 -0.04615 18.3056 -0.04615 17.9923 0.13845L18.5 1ZM22.9926 4.80798C23.4684 5.08836 24.0814 4.92992 24.3618 4.4541C24.6422 3.97828 24.4838 3.36526 24.0079 3.08488L22.9926 4.80798ZM17.5 8.36607C17.5 8.91836 17.9477 9.36607 18.5 9.36607C19.0523 9.36607 19.5 8.91836 19.5 8.36607H17.5ZM24.0079 40.1651C24.4838 39.8847 24.6422 39.2717 24.3618 38.7959C24.0814 38.3201 23.4684 38.1616 22.9926 38.442L24.0079 40.1651ZM18.5 42.25L17.9923 43.1115C18.3056 43.2961 18.6944 43.2961 19.0077 43.1115L18.5 42.25ZM14.0074 38.442C13.5316 38.1616 12.9186 38.3201 12.6382 38.7959C12.3578 39.2717 12.5162 39.8847 12.9921 40.1651L14.0074 38.442ZM19.5 34.8839C19.5 34.3316 19.0523 33.8839 18.5 33.8839C17.9477 33.8839 17.5 34.3316 17.5 34.8839H19.5ZM0 17.1602C0 17.7125 0.447715 18.1602 1 18.1602C1.55228 18.1602 2 17.7125 2 17.1602H0ZM1 11.3125L0.486198 10.4546C0.184599 10.6352 0 10.9609 0 11.3125H1ZM6.3582 9.2691C6.83201 8.98533 6.98608 8.3712 6.70231 7.89739C6.41855 7.42358 5.80441 7.26951 5.3306 7.55328L6.3582 9.2691ZM6.61839 15.8528C7.09186 16.1372 7.70618 15.9838 7.9905 15.5104C8.27483 15.0369 8.12149 14.4226 7.64802 14.1382L6.61839 15.8528ZM37 26.0898C37 25.5375 36.5523 25.0898 36 25.0898C35.4477 25.0898 35 25.5375 35 26.0898H37ZM36 31.9375L36.5138 32.7954C36.8154 32.6148 37 32.2891 37 31.9375H36ZM30.6418 33.9809C30.168 34.2647 30.0139 34.8788 30.2977 35.3526C30.5815 35.8264 31.1956 35.9805 31.6694 35.6967L30.6418 33.9809ZM30.3816 27.3972C29.9081 27.1128 29.2938 27.2662 29.0095 27.7396C28.7252 28.2131 28.8785 28.8274 29.352 29.1118L30.3816 27.3972ZM5.32476 35.7383C5.79662 36.0253 6.41179 35.8754 6.69878 35.4036C6.98578 34.9317 6.83591 34.3165 6.36405 34.0295L5.32476 35.7383ZM1 31.9375H0C0 32.2866 0.182073 32.6105 0.480354 32.7919L1 31.9375ZM2 26.0898C2 25.5375 1.55228 25.0898 1 25.0898C0.447715 25.0898 0 25.5375 0 26.0898H2ZM7.59245 29.1095C8.0647 28.8232 8.2154 28.2082 7.92904 27.736C7.64269 27.2637 7.02772 27.113 6.55547 27.3994L7.59245 29.1095ZM31.6694 7.55328C31.1956 7.26951 30.5815 7.42358 30.2977 7.89739C30.0139 8.3712 30.168 8.98533 30.6418 9.2691L31.6694 7.55328ZM36 11.3125H37C37 10.9609 36.8154 10.6352 36.5138 10.4546L36 11.3125ZM35 17.1602C35 17.7125 35.4477 18.1602 36 18.1602C36.5523 18.1602 37 17.7125 37 17.1602H35ZM29.352 14.1382C28.8785 14.4226 28.7252 15.0369 29.0095 15.5104C29.2938 15.9838 29.9081 16.1372 30.3816 15.8528L29.352 14.1382ZM17.5 27.5179C17.5 28.0701 17.9477 28.5179 18.5 28.5179C19.0523 28.5179 19.5 28.0701 19.5 27.5179H17.5ZM24.0079 19.5401C24.4838 19.2597 24.6422 18.6467 24.3618 18.1709C24.0814 17.6951 23.4684 17.5366 22.9926 17.817L24.0079 19.5401ZM14.0074 17.817C13.5316 17.5366 12.9186 17.6951 12.6382 18.1709C12.3578 18.6467 12.5162 19.2597 12.9921 19.5401L14.0074 17.817ZM14.0074 4.80798L19.0077 1.86155L17.9923 0.13845L12.9921 3.08488L14.0074 4.80798ZM17.9923 1.86155L22.9926 4.80798L24.0079 3.08488L19.0077 0.13845L17.9923 1.86155ZM17.5 1V8.36607H19.5V1H17.5ZM22.9926 38.442L17.9923 41.3884L19.0077 43.1115L24.0079 40.1651L22.9926 38.442ZM19.0077 41.3884L14.0074 38.442L12.9921 40.1651L17.9923 43.1115L19.0077 41.3884ZM19.5 42.25V34.8839H17.5V42.25H19.5ZM2 17.1602V11.3125H0V17.1602H2ZM1.5138 12.1704L6.3582 9.2691L5.3306 7.55328L0.486198 10.4546L1.5138 12.1704ZM0.485184 12.1698L6.61839 15.8528L7.64802 14.1382L1.51482 10.4552L0.485184 12.1698ZM35 26.0898V31.9375H37V26.0898H35ZM35.4862 31.0796L30.6418 33.9809L31.6694 35.6967L36.5138 32.7954L35.4862 31.0796ZM36.5148 31.0802L30.3816 27.3972L29.352 29.1118L35.4852 32.7948L36.5148 31.0802ZM6.36405 34.0295L1.51965 31.0831L0.480354 32.7919L5.32476 35.7383L6.36405 34.0295ZM2 31.9375V26.0898H0V31.9375H2ZM1.51849 32.7926L7.59245 29.1095L6.55547 27.3994L0.481508 31.0824L1.51849 32.7926ZM30.6418 9.2691L35.4862 12.1704L36.5138 10.4546L31.6694 7.55328L30.6418 9.2691ZM35 11.3125V17.1602H37V11.3125H35ZM35.4852 10.4552L29.352 14.1382L30.3816 15.8528L36.5148 12.1698L35.4852 10.4552ZM19.5 27.5179V21.625H17.5V27.5179H19.5ZM19.0077 22.4865L24.0079 19.5401L22.9926 17.817L17.9923 20.7634L19.0077 22.4865ZM19.0077 20.7634L14.0074 17.817L12.9921 19.5401L17.9923 22.4865L19.0077 20.7634Z" fill="url(#paint0_linear_175_5)"/>
                <defs>
                  <linearGradient id="paint0_linear_175_5" x1="36" y1="1" x2="1" y2="42" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#FFEC00"/>
                    <stop offset="1" stop-color="#F57F23"/>
                  </linearGradient>
                </defs>
              </svg>
            </button>

            <button class="d-block my-2" (click)="navigateToProductSite()">
              <svg xmlns="http://www.w3.org/2000/svg" width="35" height="36" viewBox="0 0 35 36" fill="none">
                <path d="M10.2495 16.0516C12.5733 13.7277 16.6262 13.7277 18.9501 16.0516L20.4002 17.5017L23.3004 14.6015L21.8503 13.1514C19.9162 11.2152 17.34 10.1466 14.5998 10.1466C11.8596 10.1466 9.28341 11.2152 7.34925 13.1514L2.99688 17.5017C1.07768 19.4271 0 22.0347 0 24.7533C0 27.4718 1.07768 30.0794 2.99688 32.0048C3.94831 32.9576 5.07865 33.713 6.32293 34.2276C7.56721 34.7422 8.90092 35.0059 10.2474 35.0035C11.5943 35.0063 12.9284 34.7428 14.1731 34.2282C15.4177 33.7136 16.5484 32.958 17.5 32.0048L18.9501 30.5547L16.0499 27.6545L14.5998 29.1046C13.4439 30.2553 11.8794 30.9013 10.2484 30.9013C8.61749 30.9013 7.05293 30.2553 5.89709 29.1046C4.74542 27.9493 4.09873 26.3845 4.09873 24.7533C4.09873 23.122 4.74542 21.5572 5.89709 20.4019L10.2495 16.0516Z" fill="url(#paint0_linear_175_9)"/>
                <path d="M17.5 2.99857L16.0499 4.44868L18.9501 7.34889L20.4002 5.89878C21.5561 4.74811 23.1206 4.1021 24.7516 4.1021C26.3825 4.1021 27.9471 4.74811 29.1029 5.89878C30.2546 7.05409 30.9013 8.61885 30.9013 10.2501C30.9013 11.8814 30.2546 13.4462 29.1029 14.6015L24.7505 18.9518C22.4267 21.2757 18.3738 21.2757 16.0499 18.9518L14.5998 17.5017L11.6996 20.4019L13.1497 21.852C15.0838 23.7882 17.66 24.8568 20.4002 24.8568C23.1404 24.8568 25.7166 23.7882 27.6508 21.852L32.0031 17.5017C33.9223 15.5763 35 12.9687 35 10.2501C35 7.5316 33.9223 4.92394 32.0031 2.99857C30.0783 1.07837 27.4704 0 24.7516 0C22.0327 0 19.4248 1.07837 17.5 2.99857Z" fill="url(#paint1_linear_175_9)"/>
                <defs>
                  <linearGradient id="paint0_linear_175_9" x1="35" y1="0" x2="-9.53579e-07" y2="35" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#FFEC00"/>
                    <stop offset="1" stop-color="#F57F23"/>
                  </linearGradient>
                  <linearGradient id="paint1_linear_175_9" x1="35" y1="0" x2="-9.53579e-07" y2="35" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#FFEC00"/>
                    <stop offset="1" stop-color="#F57F23"/>
                  </linearGradient>
                </defs>
              </svg>
            </button>

            <button class="d-block mb-3 mt-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="35" height="36" viewBox="0 0 35 36" fill="none">
                <path d="M24.0627 5.46935C24.0625 4.18625 24.5135 2.94395 25.3368 1.9598C26.1601 0.975653 27.3032 0.312321 28.5661 0.0858604C29.8291 -0.1406 31.1315 0.0842335 32.2454 0.721024C33.3593 1.35781 34.2139 2.36601 34.6595 3.56922C35.1052 4.77244 35.1136 6.09404 34.6832 7.30282C34.2529 8.51159 33.4112 9.53057 32.3055 10.1815C31.1997 10.8323 29.9003 11.0737 28.6346 10.8633C27.3689 10.6529 26.2174 10.0041 25.3817 9.03054L10.6863 15.8554C11.0242 16.9261 11.0242 18.0747 10.6863 19.1454L25.3817 25.9703C26.2651 24.9429 27.4985 24.28 28.8427 24.1102C30.187 23.9403 31.5464 24.2755 32.6576 25.0509C33.7688 25.8262 34.5526 26.9864 34.8571 28.3067C35.1616 29.627 34.9651 31.0134 34.3057 32.197C33.6463 33.3807 32.5709 34.2774 31.288 34.7135C30.0052 35.1495 28.6061 35.0937 27.362 34.557C26.1179 34.0202 25.1173 33.0407 24.5542 31.8083C23.9911 30.5759 23.9056 29.1783 24.3142 27.8865L9.61886 21.0616C8.89138 21.9094 7.92172 22.5141 6.8403 22.7942C5.75888 23.0744 4.61758 23.0167 3.56995 22.6289C2.52231 22.241 1.61859 21.5416 0.980361 20.6247C0.342128 19.7079 0 18.6175 0 17.5004C0 16.3833 0.342128 15.2929 0.980361 14.3761C1.61859 13.4592 2.52231 12.7598 3.56995 12.3719C4.61758 11.9841 5.75888 11.9264 6.8403 12.2065C7.92172 12.4867 8.89138 13.0914 9.61886 13.9392L24.3142 7.11432C24.147 6.58204 24.0621 6.02729 24.0627 5.46935V5.46935Z" fill="url(#paint0_linear_175_13)"/>
                <defs>
                  <linearGradient id="paint0_linear_175_13" x1="35" y1="-2.0859e-06" x2="-1.25154e-06" y2="35" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#FFEC00"/>
                    <stop offset="1" stop-color="#F57F23"/>
                  </linearGradient>
                </defs>
              </svg>
            </button>

          </div>


          <app-canvas3-d class=""
            [containerWidth]="canvasContainerRef.offsetWidth"
            [containerHeight]="canvasContainerRef.offsetHeight"
            [model3DLink]="product?.link3D"
            [albedoMap]="product?.textures?.albedoMap"
            [alphaMap]="product?.textures?.alphaMap"
            [aoMap]="product?.textures?.aoMap"
            [heightMap]="product?.textures?.heightMap"
            [metalnessMap]="product?.textures?.metalnessMap"
            [normalMap]="product?.textures?.normalMap"
            [roughnessMap]="product?.textures?.roughnessMap">
          </app-canvas3-d>
        </div>


      </div>
    </div>
  </div>
</main>









                <!-- <div *ngIf="isLoading" class="d-flex response-container ">
                  <div id="server-response" class="my-2">
                    <div class="loader">
                      <div class="spinner-grow" style="background-color: #6C2483;" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                      <div class="spinner-grow" style="background-color: #E94E1B;" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                      <div class="spinner-grow" style="background-color: #EF790C;" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                      <div class="spinner-grow" style="background-color: #FFED00;" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                    </div>
                  </div>
                </div> -->





